<section data-ng-controller="PolicyModelAccordionCtrl as vm">
  <p class="c-info-text c-info-text--narrow c-info-text--bottom-margin"><i
    class="c-icon c-info-text__icon icon-info1"></i><span class="c-info-text__text">{{"_POLICY_._MODEL_INTRO_" | translate}}</span>
  </p>

  <div class="c-row c-msg c-msg--small c-msg--error"
       data-ng-if="vm.error != '' && vm.policy.transformations.length === 0"
       data-qa="policy-model-accordion-error-msg">
    <i class="c-icon icon-circle-cross"></i>
    <span>{{vm.error| translate}}</span>
  </div>

  <form class="c-form c-panel c-panel--framed" novalidate>
    <c-accordion items="vm.policy.transformations"
                 item-template="'views/policy-wizard/model-panel.html'"
                 on-change-opened-element="vm.changeOpenedModel(selectedItemPosition)"
                 item-qa-tag="policy-model"
                 show-new-item-panel="vm.isActiveModelCreationPanel()"
                 accordion-status="vm.modelAccordionStatus"
                 item-attribute-in-header="type">
    </c-accordion>
  </form>

  <footer class="c-row c-row--footer">
    <div class="c-col c-col--6 c-col--vertical-centered c-col--to-left">
      <div class="c-col c-col--6 c-col--vertical-centered c-col--to-left">
        <c-icon-link icon-class="'icon-help1'" text="'_HELP_' | translate" link-url="vm.helpLink"
                     data-qa="policy-model-help"></c-icon-link>
      </div>
    </div>

    <button class="c-button c-button--call-to-action-1" ng-if="!vm.isActiveModelCreationPanel()"
            data-ng-click="vm.activateModelCreationPanel()" data-qa="policy-model-add-new-transformation-button">
      <i class="icon icon-circle-plus"></i>
      <span>{{"_POLICY_._ADD_TRANSFORMATION_" | translate}}</span>
    </button>
  </footer>
</section>
